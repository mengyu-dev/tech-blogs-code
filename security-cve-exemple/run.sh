#!/bin/bash

# Vérifier si Docker ou Podman est disponible
if command -v docker &> /dev/null; then
    RUNTIME="docker"
elif command -v podman &> /dev/null; then
    RUNTIME="podman"
else
    echo "Erreur : Aucun runtime compatible trouvé (ni Docker, ni Podman)."
    exit 1
fi

echo "Utilisation de $RUNTIME."

# Construire et exécuter l'application
$RUNTIME build ./cve-2022-22965 -t cve-app && $RUNTIME run --rm -p 8080:8080 cve-app