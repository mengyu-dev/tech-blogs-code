<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Work Time Countdown</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            transition: background-color 0.5s ease;
        }

        .container {
            text-align: center;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            background-color: white;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        p {
            font-size: 1.5rem;
        }

        .positive {
            background-color: #d4edda; /* Greenish */
            color: #155724;
        }

        .negative {
            background-color: #f8d7da; /* Reddish */
            color: #721c24;
        }

        .weekend {
            background-color: #ffeeba; /* Yellowish */
            color: #856404;
        }
    </style>
</head>
<body>
<div class="container">
    <h1 id="status">Time Remaining</h1>
    <p id="time"></p>
    <p id="count"></p>
</div>
<script th:inline="javascript">
    /*<![CDATA[*/
    let visitCount = /*[[${count}]]*/ 0;
    /*]]>*/
</script>
<script>
    function updateTime() {
        const now = new Date();
        const dayOfWeek = now.getDay();
        const startOfWork = new Date();
        const endOfWork = new Date();

        startOfWork.setHours(9, 0, 0, 0); // 9:00 AM
        endOfWork.setHours(18, 0, 0, 0); // 6:00 PM

        const container = document.querySelector('.container');
        const statusElement = document.getElementById('status');
        const timeElement = document.getElementById('time');

        let timeDiff, statusMessage;

        if (dayOfWeek === 0 || dayOfWeek === 6) { // Weekend check (0 = Sunday, 6 = Saturday)
            statusMessage = "It's the weekend! No work today.";
            timeElement.textContent = "Enjoy your day!";
            document.body.style.backgroundColor = '#ffeeba'; // Yellow
            container.className = 'container weekend';
            return;
        }

        if (now < startOfWork) {
            // Before work starts
            timeDiff = startOfWork - now;
            statusMessage = 'Time Remaining to Start Work';
            document.body.style.backgroundColor = '#d4edda'; // Green
            container.className = 'container positive';
        } else if (now >= startOfWork && now <= endOfWork) {
            // During work hours
            timeDiff = endOfWork - now;
            statusMessage = 'Time Remaining Until Work Ends';
            document.body.style.backgroundColor = '#f8d7da'; // Red
            container.className = 'container negative';
        } else {
            // After work ends
            timeDiff = startOfWork.getTime() + 24 * 60 * 60 * 1000 - now.getTime();
            statusMessage = 'Time Remaining to Start Work Tomorrow';
            document.body.style.backgroundColor = '#d4edda'; // Green
            container.className = 'container positive';
        }

        // Convert time difference to hours, minutes, seconds
        const hours = Math.floor(timeDiff / (1000 * 60 * 60));
        const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);

        // Update the UI
        statusElement.textContent = statusMessage;
        timeElement.textContent = `${hours}h ${minutes}m ${seconds}s`;
    }

    document.getElementById('count').textContent = `${visitCount} visits`;

    // Initial update
    updateTime();

    // Update every second
    setInterval(updateTime, 1000);
</script>
</body>
</html>
